# 既定でautotuneはグループから読み込み（off/per-image/global を切替）
defaults:
  - autotune: "global"
  - _self_

paths:
  images_dir: data/processed/court/images
  coco_json: data/processed/court/annotation.json
  court_spec: experiments/pnp/configs/court_spec.yaml
  camera_yaml: experiments/pnp/configs/camera_example.yaml # 使わない場合は空 or null
  out_dir: experiments/pnp/poses

intrinsics:
  use_camera_yaml: true # camera_yaml を優先。falseなら下記fx,fy,cx,cy,distを使用
  fx: null # 例: 2000.0
  fy: null
  cx: null
  cy: null
  dist: [] # 例: [0.0, 0.0, 0.0, 0.0, 0.0]

filter:
  vmin: 2 # COCOの可視フラグ下限（2推奨）
  force_z0: true # コートZ=0を強制（IPPE前提の平面を保証）
  kp_scale: 1.0 # アノテ座標のスケーリング（前処理で縮小している等の補正）

robust:
  inlier_px: null # null の場合は対角の0.5%で自動設定
  irls_iters: 3

constraints:
  min_height: 0.3 # カメラ高さの下限[m]
  cheirality_frac: 0.6 # 正の深度である点の割合下限
  allow_upward: false # 上向きカメラを許容するか

undistort:
  use: true # undistortPointsで前正規化 → PnP側のdistはNoneに

exec:
  limit: null # 処理最大枚数。nullで全件
  visualize: true
  jobs: 1 # 並列ワーカー数
