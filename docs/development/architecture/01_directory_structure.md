# 1. 基本的なディレクトリ構成

このドキュメントでは、新しいモデル開発プロジェクトの標準的なディレクトリ構成を定義します。この構成は、コードの再利用性を高め、一貫性を保つための「ひな形」です。

---

## 1.1. 標準構成（推奨）

新しいプロジェクトを開始する際は、まず以下の構成を基本とします。

# 1. 基本的なディレクトリ構成

このドキュメントでは、新しいモデル開発プロジェクトの標準的なディレクトリ構成を定義します。この構成は、コードの再利用性を高め、一貫性を保つための「ひな形」です。

---

## 1.1. 標準構成（推奨）

新しいプロジェクトを開始する際は、まず以下の構成を基本とします。

```
<project_root>/
├── configs/         # 実験設定 (Hydra)
│   ├── config.yaml    # メイン設定ファイル
│   ├── callbacks/     # コールバック設定
│   ├── data/          # データセット設定
│   ├── model/         # モデルアーキテクチャ設定
│   └── training/      # 学習プロセス設定
├── callbacks/       # 学習中のカスタム処理 (PyTorch Lightning Callbacks)
├── model/           # モデルアーキテクチャ (PyTorch nn.Module)
├── training/        # 学習ロジック (PyTorch Lightning)
│   ├── module.py      # 学習・検証・テストのステップを定義 (LightningModule)
│   ├── datamodule.py  # データセットの読み込みと準備 (LightningDataModule)
│   ├── dataset.py     # データセットの具体的な実装
│   └── transforms.py  # データ拡張・前処理
├── runner/          # タスク実行
│   ├── train.py       # 学習タスクの実行
│   └── infer.py       # 推論タスクの実行
├── tests/           # テストコード
└── main.py          # プロジェクトのエントリーポイント
```

---

## 1.2. プロジェクトの成長に合わせた拡張

まず**標準構成（1.1）**でモデルのコアな機能を実装し、動作することを確認するのが最も効率的な開発スタイルです。その上で、プロジェクトのニーズが明確になった段階で、以下のディレクトリを段階的に追加して機能を拡張していくことを推奨します。

### 1.2.1. 汎用的な拡張ディレクトリ

これらは多くの機械学習プロジェクトで共通して有用な、再利用性の高いモジュールです。

| ディレクトリ    | 役割と説明                                                                                     |
| --------------- | ---------------------------------------------------------------------------------------------- |
| **`losses/`**   | **損失関数**。複数の実験で共通して使う、あるいは複雑な損失関数をここに分離して管理します。     |
| **`utils/`**    | **共通ツール**。プロジェクト全体で使われるヘルパー関数やユーティリティクラスなどを配置します。 |
| **`analysis/`** | **結果分析**。推論結果の可視化や、精度評価などの後処理スクリプトを配置します。                 |

### 1.2.2. ドメイン固有の拡張ディレクトリ

これらは、特定のタスクやアルゴリズムに特化したロジックを格納するためのディレクトリです。プロジェクトの目的に応じて自由に作成してください。標準構成と明確に分離することで、プロジェクト固有の複雑さが他の部分へ影響を与えるのを防ぎます。

| ディレクトリ例   | 用途の例                                                                             |
| ---------------- | ------------------------------------------------------------------------------------ |
| **`physics/`**   | 物理シミュレーションなど、タスクの背景にある物理法則をモデル化するコード。           |
| **`trackers/`**  | 物体追跡のための後処理アルゴリズム（例: Kalman Filter）などを実装するコード。        |
| **`detectors/`** | 物体検出など、パイプラインの一部として機能する特定のサブタスクを実行するモジュール。 |

この構成に従うことで、第三者がプロジェクトの構造を迅速に理解し、開発に参加しやすくなります。

---

## 1.2. プロジェクトの成長に合わせた拡張

まず**標準構成（1.1）**でモデルのコアな機能を実装し、動作することを確認するのが最も効率的な開発スタイルです。その上で、プロジェクトのニーズが明確になった段階で、以下のディレクトリを段階的に追加して機能を拡張していくことを推奨します。

### 1.2.1. 汎用的な拡張ディレクトリ

これらは多くの機械学習プロジェクトで共通して有用な、再利用性の高いモジュールです。

| ディレクトリ  | 役割と説明                                                                                     |
| ------------- | ---------------------------------------------------------------------------------------------- |
| **`losses/`** | **損失関数**。複数の実験で共通して使う、あるいは複雑な損失関数をここに分離して管理します。     |
| **`utils/`**  | **共通ツール**。プロジェクト全体で使われるヘルパー関数やユーティリティクラスなどを配置します。 |

| **`analysis/`** | **結果分析**。推論結果の可視化や、精度評価などの後処理スクリプトを配置します。 |
| **`weight/`** | **重みファイル**。学習済みのモデルの重みファイル（`.pt`, `.ckpt`など）を配置します。 |

### 1.2.2. ドメイン固有の拡張ディレクトリ

これらは、特定のタスクやアルゴリズムに特化したロジックを格納するためのディレクトリです。プロジェクトの目的に応じて自由に作成してください。標準構成と明確に分離することで、プロジェクト固有の複雑さが他の部分へ影響を与えるのを防ぎます。

| ディレクトリ例   | 用途の例                                                                             |
| ---------------- | ------------------------------------------------------------------------------------ |
| **`physics/`**   | 物理シミュレーションなど、タスクの背景にある物理法則をモデル化するコード。           |
| **`trackers/`**  | 物体追跡のための後処理アルゴリズム（例: Kalman Filter）などを実装するコード。        |
| **`detectors/`** | 物体検出など、パイプラインの一部として機能する特定のサブタスクを実行するモジュール。 |

この構成に従うことで、第三者がプロジェクトの構造を迅速に理解し、開発に参加しやすくなります。�レーションなど、タスクの背景にある物理法則をモデル化するコード。 |
| **`trackers/`** | 物体追跡のための後処理アルゴリズム（例: Kalman Filter）などを実装するコード。 |
| **`detectors/`** | 物体検出など、パイプラインの一部として機能する特定のサブタスクを実行するモジュール。 |

この構成に従うことで、第三者がプロジェクトの構造を迅速に理解し、開発に参加しやすくなります。
